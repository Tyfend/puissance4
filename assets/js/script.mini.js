for(var numeroJoueur=1,nbrColonnes=5,nbrLignes=5,jeu=!0,text="",plateauJeu=[],i=0;i<nbrLignes;i++)plateauJeu[i]=[];function newGame(){for(var e=0;e<nbrLignes;e++)for(var n=0;n<nbrColonnes;n++)plateauJeu[e][n]=0;affichetextannonce("Le jeu commence! C'est au tour du joueur "+nomJoueur(numeroJoueur=1)),jeu=!0,creertableau()}function affichetextannonce(e){document.getElementById("text_annonce").innerHTML=e}function nomJoueur(e){return 1==e?"rouge":"bleu"}function creertableau(){text="<table>";for(var e=0;e<nbrLignes;e++){text+="<tr>";for(var n=0;n<nbrColonnes;n++)text+="<td onclick='detectclick("+n+")' id=\""+e+"-"+n+'">',1==plateauJeu[e][n]?text+="<div class='joueur1'></div>":2==plateauJeu[e][n]&&(text+="<div class='joueur2'></div>"),text+="</td>";text+="</tr>"}text+="</table>",document.getElementById("puissance_4").innerHTML=text}function detectclick(e){(verifposition(e),verifposition(e)&&jeu)&&(puissance4(posejeton(e),e,0,0)?(jeu=!1,affichetextannonce("Le joueur "+nomJoueur(numeroJoueur)+" a gagnÃ© la partie.")):affichetextannonce("C'est au tour du joueur "+nomJoueur(numeroJoueur=1==numeroJoueur?2:1)))}function verifposition(e){return 0==plateauJeu[0][e]}function posejeton(e){for(var n=nbrLignes-1;n>=0;n--)if(0==plateauJeu[n][e])return plateauJeu[n][e]=numeroJoueur,refreshtableau(n,e,numeroJoueur),n}function refreshtableau(e,n,u){document.getElementById(e+"-"+n).innerHTML="<div class='joueur"+u+"'></div>"}function puissance4(e,n,u,t){if(console.log("initial valeur :"+e+" "+n+" / increment "+u+" "+t),0==t&&0==u){var o=1+puissance4(e,n-1,0,-1)+puissance4(e,n+1,0,1),r=1+puissance4(e-1,n,-1,0)+puissance4(e+1,n,1,0),a=1+puissance4(e-1,n-1,-1,-1)+puissance4(e+1,n+1,1,1),i=1+puissance4(e-1,n+1,-1,1)+puissance4(e+1,n-1,1,-1);return console.log(o,r,a,i),o>=4||r>=4||a>=4||i>=4}return e<nbrLignes&&e>=0&&n<nbrColonnes&&n>=0?(console.log("recursive valeur : "+e+" "+n+" / increment "+u+" "+t),plateauJeu[e][n]==numeroJoueur?1+puissance4(e+u,n+t,u,t):0):0}newGame();